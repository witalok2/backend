{"remainingRequest":"/home/witalo/go/src/github.com/witalok2/application/frontend/node_modules/babel-loader/lib/index.js!/home/witalo/go/src/github.com/witalok2/application/frontend/node_modules/quasar/src/components/select/QSelect.js","dependencies":[{"path":"/home/witalo/go/src/github.com/witalok2/application/frontend/node_modules/quasar/src/components/select/QSelect.js","mtime":499162500000},{"path":"/home/witalo/go/src/github.com/witalok2/application/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/witalo/go/src/github.com/witalok2/application/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.string.code-point-at\";\nimport _defineProperty from \"/home/witalo/go/src/github.com/witalok2/application/frontend/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/es6.array.find-index\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport Vue from 'vue';\nimport QField from \"../field/QField.js\";\nimport QIcon from \"../icon/QIcon.js\";\nimport QChip from \"../chip/QChip.js\";\nimport QItem from \"../list/QItem.js\";\nimport QItemSection from \"../list/QItemSection.js\";\nimport QItemLabel from \"../list/QItemLabel.js\";\nimport QMenu from \"../menu/QMenu.js\";\nimport QDialog from \"../dialog/QDialog.js\";\nimport { isDeepEqual } from \"../../utils/is.js\";\nimport { stop, prevent, stopAndPrevent } from \"../../utils/event.js\";\nimport { normalizeToInterval } from \"../../utils/format.js\";\nimport VirtualScroll from \"../../mixins/virtual-scroll.js\";\n\nvar validateNewValueMode = function validateNewValueMode(v) {\n  return ['add', 'add-unique', 'toggle'].includes(v);\n};\n\nexport default Vue.extend({\n  name: 'QSelect',\n  mixins: [QField, VirtualScroll],\n  props: {\n    value: {\n      required: true\n    },\n    multiple: Boolean,\n    displayValue: [String, Number],\n    displayValueSanitize: Boolean,\n    dropdownIcon: String,\n    options: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    optionValue: [Function, String],\n    optionLabel: [Function, String],\n    optionDisable: [Function, String],\n    hideSelected: Boolean,\n    hideDropdownIcon: Boolean,\n    fillInput: Boolean,\n    maxValues: [Number, String],\n    optionsDense: Boolean,\n    optionsDark: Boolean,\n    optionsSelectedClass: String,\n    optionsCover: Boolean,\n    optionsSanitize: Boolean,\n    popupContentClass: String,\n    popupContentStyle: [String, Array, Object],\n    useInput: Boolean,\n    useChips: Boolean,\n    newValueMode: {\n      type: String,\n      validator: validateNewValueMode\n    },\n    mapOptions: Boolean,\n    emitValue: Boolean,\n    inputDebounce: {\n      type: [Number, String],\n      default: 500\n    },\n    transitionShow: String,\n    transitionHide: String,\n    behavior: {\n      type: String,\n      validator: function validator(v) {\n        return ['default', 'menu', 'dialog'].includes(v);\n      },\n      default: 'default'\n    }\n  },\n  data: function data() {\n    return {\n      menu: false,\n      dialog: false,\n      optionIndex: -1,\n      inputValue: '',\n      dialogFieldFocused: false\n    };\n  },\n  watch: {\n    innerValue: {\n      handler: function handler() {\n        if (this.useInput === true && this.fillInput === true && this.multiple !== true && // Prevent re-entering in filter while filtering\n        // Also prevent clearing inputValue while filtering\n        this.innerLoading !== true && (this.dialog !== true && this.menu !== true || this.hasValue !== true)) {\n          this.__resetInputValue();\n\n          if (this.dialog === true || this.menu === true) {\n            this.filter('');\n          }\n        }\n      },\n      immediate: true\n    },\n    menu: function menu(show) {\n      this.__updateMenu(show);\n    }\n  },\n  computed: {\n    virtualScrollLength: function virtualScrollLength() {\n      return Array.isArray(this.options) ? this.options.length : 0;\n    },\n    fieldClass: function fieldClass() {\n      return \"q-select q-field--auto-height q-select--with\".concat(this.useInput !== true ? 'out' : '', \"-input\");\n    },\n    menuContentClass: function menuContentClass() {\n      return (this.virtualScrollHorizontal === true ? 'q-virtual-scroll--horizontal' : '') + (this.popupContentClass ? ' ' + this.popupContentClass : '');\n    },\n    menuClass: function menuClass() {\n      return this.menuContentClass + (this.optionsDark === true ? ' q-select__menu--dark' : '');\n    },\n    innerValue: function innerValue() {\n      var _this = this;\n\n      var mapNull = this.mapOptions === true && this.multiple !== true,\n          val = this.value !== void 0 && (this.value !== null || mapNull === true) ? this.multiple === true && Array.isArray(this.value) ? this.value : [this.value] : [];\n      return this.mapOptions === true && Array.isArray(this.options) === true ? this.value === null && mapNull === true ? val.map(function (v) {\n        return _this.__getOption(v);\n      }).filter(function (v) {\n        return v !== null;\n      }) : val.map(function (v) {\n        return _this.__getOption(v);\n      }) : val;\n    },\n    noOptions: function noOptions() {\n      return this.virtualScrollLength === 0;\n    },\n    selectedString: function selectedString() {\n      var _this2 = this;\n\n      return this.innerValue.map(function (opt) {\n        return _this2.__getOptionLabel(opt);\n      }).join(', ');\n    },\n    displayAsText: function displayAsText() {\n      return this.displayValueSanitize === true || this.displayValue === void 0 && (this.optionsSanitize === true || this.innerValue.some(function (opt) {\n        return opt !== null && opt.sanitize === true;\n      }));\n    },\n    selectedScope: function selectedScope() {\n      var _this3 = this;\n\n      var tabindex = this.focused === true ? 0 : -1;\n      return this.innerValue.map(function (opt, i) {\n        return {\n          index: i,\n          opt: opt,\n          sanitize: _this3.optionsSanitize === true || opt.sanitize === true,\n          selected: true,\n          removeAtIndex: _this3.__removeAtIndexAndFocus,\n          toggleOption: _this3.toggleOption,\n          tabindex: tabindex\n        };\n      });\n    },\n    optionScope: function optionScope() {\n      var _this4 = this;\n\n      if (this.virtualScrollLength === 0) {\n        return [];\n      }\n\n      var _this$virtualScrollSl = this.virtualScrollSliceRange,\n          from = _this$virtualScrollSl.from,\n          to = _this$virtualScrollSl.to;\n      return this.options.slice(from, to).map(function (opt, i) {\n        var disable = _this4.__isDisabled(opt);\n\n        var index = from + i;\n        var itemProps = {\n          clickable: true,\n          active: false,\n          activeClass: _this4.optionsSelectedClass,\n          manualFocus: true,\n          focused: false,\n          disable: disable,\n          tabindex: -1,\n          dense: _this4.optionsDense,\n          dark: _this4.optionsDark\n        };\n\n        if (disable !== true) {\n          _this4.__isSelected(opt) === true && (itemProps.active = true);\n          _this4.optionIndex === index && (itemProps.focused = true);\n        }\n\n        var itemEvents = {\n          click: function click() {\n            _this4.toggleOption(opt);\n          }\n        };\n\n        if (_this4.$q.platform.is.desktop === true) {\n          itemEvents.mousemove = function () {\n            _this4.setOptionIndex(index);\n          };\n        }\n\n        return {\n          index: index,\n          opt: opt,\n          sanitize: _this4.optionsSanitize === true || opt.sanitize === true,\n          selected: itemProps.active,\n          focused: itemProps.focused,\n          toggleOption: _this4.toggleOption,\n          setOptionIndex: _this4.setOptionIndex,\n          itemProps: itemProps,\n          itemEvents: itemEvents\n        };\n      });\n    },\n    dropdownArrowIcon: function dropdownArrowIcon() {\n      return this.dropdownIcon !== void 0 ? this.dropdownIcon : this.$q.iconSet.arrow.dropdown;\n    },\n    squaredMenu: function squaredMenu() {\n      return this.optionsCover === false && this.outlined !== true && this.standout !== true && this.borderless !== true && this.rounded !== true;\n    }\n  },\n  methods: {\n    removeAtIndex: function removeAtIndex(index) {\n      if (index > -1 && index < this.innerValue.length) {\n        if (this.multiple === true) {\n          var model = [].concat(this.value);\n          this.$emit('remove', {\n            index: index,\n            value: model.splice(index, 1)\n          });\n          this.$emit('input', model);\n        } else {\n          this.$emit('input', null);\n        }\n      }\n    },\n    __removeAtIndexAndFocus: function __removeAtIndexAndFocus(index) {\n      this.removeAtIndex(index);\n\n      this.__focus();\n    },\n    add: function add(opt, unique) {\n      var val = this.emitValue === true ? this.__getOptionValue(opt) : opt;\n\n      if (this.multiple !== true) {\n        this.$emit('input', val);\n        return;\n      }\n\n      if (this.innerValue.length === 0) {\n        this.$emit('add', {\n          index: 0,\n          value: val\n        });\n        this.$emit('input', this.multiple === true ? [val] : val);\n        return;\n      }\n\n      if (unique === true && this.__isSelected(opt) === true) {\n        return;\n      }\n\n      var model = [].concat(this.value);\n\n      if (this.maxValues !== void 0 && model.length >= this.maxValues) {\n        return;\n      }\n\n      this.$emit('add', {\n        index: model.length,\n        value: val\n      });\n      model.push(val);\n      this.$emit('input', model);\n    },\n    toggleOption: function toggleOption(opt) {\n      var _this5 = this;\n\n      if (this.editable !== true || opt === void 0 || this.__isDisabled(opt) === true) {\n        return;\n      }\n\n      var optValue = this.__getOptionValue(opt);\n\n      if (this.multiple !== true) {\n        this.updateInputValue(this.fillInput === true ? this.__getOptionLabel(opt) : '', true, true);\n        this.hidePopup();\n\n        if (isDeepEqual(this.__getOptionValue(this.value), optValue) !== true) {\n          this.$emit('input', this.emitValue === true ? optValue : opt);\n        }\n\n        return;\n      }\n\n      (this.hasDialog !== true || this.dialogFieldFocused === true) && this.__focus();\n\n      if (this.innerValue.length === 0) {\n        var val = this.emitValue === true ? optValue : opt;\n        this.$emit('add', {\n          index: 0,\n          value: val\n        });\n        this.$emit('input', this.multiple === true ? [val] : val);\n        return;\n      }\n\n      var model = [].concat(this.value),\n          index = this.value.findIndex(function (v) {\n        return isDeepEqual(_this5.__getOptionValue(v), optValue);\n      });\n\n      if (index > -1) {\n        this.$emit('remove', {\n          index: index,\n          value: model.splice(index, 1)\n        });\n      } else {\n        if (this.maxValues !== void 0 && model.length >= this.maxValues) {\n          return;\n        }\n\n        var _val = this.emitValue === true ? optValue : opt;\n\n        this.$emit('add', {\n          index: model.length,\n          value: _val\n        });\n        model.push(_val);\n      }\n\n      this.$emit('input', model);\n    },\n    setOptionIndex: function setOptionIndex(index) {\n      if (this.$q.platform.is.desktop !== true) {\n        return;\n      }\n\n      var val = index > -1 && index < this.virtualScrollLength ? index : -1;\n\n      if (this.optionIndex !== val) {\n        this.optionIndex = val;\n      }\n    },\n    __getOption: function __getOption(value) {\n      var _this6 = this;\n\n      return this.options.find(function (opt) {\n        return isDeepEqual(_this6.__getOptionValue(opt), value);\n      }) || value;\n    },\n    __getOptionValue: function __getOptionValue(opt) {\n      if (typeof this.optionValue === 'function') {\n        return this.optionValue(opt);\n      }\n\n      if (Object(opt) === opt) {\n        return typeof this.optionValue === 'string' ? opt[this.optionValue] : opt.value;\n      }\n\n      return opt;\n    },\n    __getOptionLabel: function __getOptionLabel(opt) {\n      if (typeof this.optionLabel === 'function') {\n        return this.optionLabel(opt);\n      }\n\n      if (Object(opt) === opt) {\n        return typeof this.optionLabel === 'string' ? opt[this.optionLabel] : opt.label;\n      }\n\n      return opt;\n    },\n    __isDisabled: function __isDisabled(opt) {\n      if (typeof this.optionDisable === 'function') {\n        return this.optionDisable(opt) === true;\n      }\n\n      if (Object(opt) === opt) {\n        return typeof this.optionDisable === 'string' ? opt[this.optionDisable] === true : opt.disable === true;\n      }\n\n      return false;\n    },\n    __isSelected: function __isSelected(opt) {\n      var _this7 = this;\n\n      var val = this.__getOptionValue(opt);\n\n      return this.innerValue.find(function (v) {\n        return isDeepEqual(_this7.__getOptionValue(v), val);\n      }) !== void 0;\n    },\n    __onTargetKeyup: function __onTargetKeyup(e) {\n      // if ESC and we have an opened menu\n      // then stop propagation (might be caught by a QDialog\n      // and so it will also close the QDialog, which is wrong)\n      if (e.keyCode === 27 && this.menu === true) {\n        stop(e);\n\n        this.__closeMenu();\n      }\n\n      this.$emit('keyup', e);\n    },\n    __onTargetKeypress: function __onTargetKeypress(e) {\n      this.$emit('keypress', e);\n    },\n    __onTargetKeydown: function __onTargetKeydown(e) {\n      var _this8 = this;\n\n      this.$emit('keydown', e); // escape\n\n      if (e.keyCode === 27) {\n        return;\n      } // tab\n\n\n      if (e.keyCode === 9) {\n        this.__closeMenu();\n\n        return;\n      }\n\n      if (e.target !== this.$refs.target) {\n        return;\n      } // down\n\n\n      if (e.keyCode === 40 && this.innerLoading !== true && this.menu === false) {\n        stopAndPrevent(e);\n        this.showPopup();\n        return;\n      } // delete\n\n\n      if (e.keyCode === 8 && this.multiple === true && this.inputValue.length === 0 && Array.isArray(this.value)) {\n        this.removeAtIndex(this.value.length - 1);\n        return;\n      } // up, down\n\n\n      var optionsLength = this.virtualScrollLength;\n\n      if (e.keyCode === 38 || e.keyCode === 40) {\n        stopAndPrevent(e);\n\n        if (this.menu === true) {\n          var index = this.optionIndex;\n\n          do {\n            index = normalizeToInterval(index + (e.keyCode === 38 ? -1 : 1), -1, optionsLength - 1);\n          } while (index !== -1 && index !== this.optionIndex && this.__isDisabled(this.options[index]) === true);\n\n          if (this.optionIndex !== index) {\n            this.setOptionIndex(index);\n            this.scrollTo(index);\n\n            if (index >= 0 && this.useInput === true && this.fillInput === true) {\n              var inputValue = this.__getOptionLabel(this.options[index]);\n\n              if (this.inputValue !== inputValue) {\n                this.inputValue = inputValue;\n              }\n            }\n          }\n        }\n      } // enter\n\n\n      if (e.target !== this.$refs.target || e.keyCode !== 13) {\n        return;\n      }\n\n      stopAndPrevent(e);\n\n      if (this.optionIndex > -1 && this.optionIndex < optionsLength) {\n        this.toggleOption(this.options[this.optionIndex]);\n        return;\n      }\n\n      if (this.inputValue.length > 0 && (this.newValueMode !== void 0 || this.$listeners['new-value'] !== void 0)) {\n        var done = function done(val, mode) {\n          if (mode) {\n            if (validateNewValueMode(mode) !== true) {\n              console.error('QSelect: invalid new value mode - ' + mode);\n              return;\n            }\n          } else {\n            mode = _this8.newValueMode;\n          }\n\n          if (val !== void 0 && val !== null) {\n            _this8[mode === 'toggle' ? 'toggleOption' : 'add'](val, mode === 'add-unique');\n          }\n\n          _this8.updateInputValue('', _this8.multiple !== true, true);\n        };\n\n        if (this.$listeners['new-value'] !== void 0) {\n          this.$emit('new-value', this.inputValue, done);\n\n          if (this.multiple !== true) {\n            return;\n          }\n        } else {\n          done(this.inputValue);\n        }\n      }\n\n      if (this.menu === true) {\n        this.__closeMenu();\n      } else if (this.innerLoading !== true) {\n        this.showPopup();\n      }\n    },\n    __getVirtualScrollEl: function __getVirtualScrollEl() {\n      return this.hasDialog === true ? this.$refs.menuContent : this.$refs.menu !== void 0 && this.$refs.menu.__portal !== void 0 ? this.$refs.menu.__portal.$el : void 0;\n    },\n    __getVirtualScrollTarget: function __getVirtualScrollTarget() {\n      return this.__getVirtualScrollEl();\n    },\n    __getSelection: function __getSelection(h, fromDialog) {\n      var _this9 = this;\n\n      if (this.hideSelected === true) {\n        return fromDialog !== true && this.hasDialog === true ? [h('span', {\n          domProps: {\n            'textContent': this.inputValue\n          }\n        })] : [];\n      }\n\n      if (this.$scopedSlots['selected-item'] !== void 0) {\n        return this.selectedScope.map(function (scope) {\n          return _this9.$scopedSlots['selected-item'](scope);\n        });\n      }\n\n      if (this.$scopedSlots.selected !== void 0) {\n        return this.$scopedSlots.selected();\n      }\n\n      if (this.useChips === true) {\n        var tabindex = this.focused === true ? 0 : -1;\n        return this.selectedScope.map(function (scope, i) {\n          return h(QChip, {\n            key: 'option-' + i,\n            props: {\n              removable: _this9.__isDisabled(scope.opt) !== true,\n              dense: true,\n              textColor: _this9.color,\n              tabindex: tabindex\n            },\n            on: {\n              remove: function remove() {\n                scope.removeAtIndex(i);\n              }\n            }\n          }, [h('span', {\n            domProps: _defineProperty({}, scope.sanitize === true ? 'textContent' : 'innerHTML', _this9.__getOptionLabel(scope.opt))\n          })]);\n        });\n      }\n\n      return [h('span', {\n        domProps: _defineProperty({}, this.displayAsText ? 'textContent' : 'innerHTML', this.displayValue !== void 0 ? this.displayValue : this.selectedString)\n      })];\n    },\n    __getControl: function __getControl(h, fromDialog) {\n      var data = {\n        attrs: {}\n      };\n\n      var child = this.__getSelection(h, fromDialog);\n\n      if (this.useInput === true && (fromDialog === true || this.hasDialog === false)) {\n        child.push(this.__getInput(h, fromDialog));\n      } else if (this.editable === true) {\n        data = {\n          ref: 'target',\n          attrs: {\n            tabindex: 0,\n            autofocus: this.autofocus\n          },\n          on: {\n            keydown: this.__onTargetKeydown,\n            keyup: this.__onTargetKeyup,\n            keypress: this.__onTargetKeypress\n          }\n        };\n      }\n\n      Object.assign(data.attrs, this.$attrs);\n      data.staticClass = 'q-field__native row items-center';\n      return h('div', data, child);\n    },\n    __getOptions: function __getOptions(h) {\n      var _this10 = this;\n\n      if (this.menu !== true) {\n        return void 0;\n      }\n\n      var fn = this.$scopedSlots.option !== void 0 ? this.$scopedSlots.option : function (scope) {\n        return h(QItem, {\n          key: scope.index,\n          props: scope.itemProps,\n          on: scope.itemEvents\n        }, [h(QItemSection, [h(QItemLabel, {\n          domProps: _defineProperty({}, scope.sanitize === true ? 'textContent' : 'innerHTML', _this10.__getOptionLabel(scope.opt))\n        })])]);\n      };\n\n      var options = this.__padVirtualScroll(h, 'div', this.optionScope.map(fn));\n\n      if (this.$scopedSlots['before-options'] !== void 0) {\n        options = this.$scopedSlots['before-options']().concat(options);\n      }\n\n      if (this.$scopedSlots['after-options'] !== void 0) {\n        options = options.concat(this.$scopedSlots['after-options']());\n      }\n\n      return options;\n    },\n    __getInnerAppend: function __getInnerAppend(h) {\n      return this.loading !== true && this.innerLoading !== true && this.hideDropdownIcon !== true ? [h(QIcon, {\n        staticClass: 'q-select__dropdown-icon',\n        props: {\n          name: this.dropdownArrowIcon\n        }\n      })] : null;\n    },\n    __onCompositionStart: function __onCompositionStart(e) {\n      e.target.composing = true;\n    },\n    __onCompositionUpdate: function __onCompositionUpdate(e) {\n      if (typeof e.data === 'string' && e.data.codePointAt(0) < 256) {\n        e.target.composing = false;\n      }\n    },\n    __onCompositionEnd: function __onCompositionEnd(e) {\n      if (e.target.composing !== true) {\n        return;\n      }\n\n      e.target.composing = false;\n\n      this.__onInputValue(e);\n    },\n    __getInput: function __getInput(h, fromDialog) {\n      var on = {\n        input: this.__onInputValue,\n        // Safari < 10.2 & UIWebView doesn't fire compositionend when\n        // switching focus before confirming composition choice\n        // this also fixes the issue where some browsers e.g. iOS Chrome\n        // fires \"change\" instead of \"input\" on autocomplete.\n        change: this.__onCompositionEnd,\n        compositionstart: this.__onCompositionStart,\n        compositionend: this.__onCompositionEnd,\n        keydown: this.__onTargetKeydown,\n        keyup: this.__onTargetKeyup,\n        keypress: this.__onTargetKeypress\n      };\n\n      if (this.$q.platform.is.android === true) {\n        on.compositionupdate = this.__onCompositionUpdate;\n      }\n\n      if (this.hasDialog === true) {\n        on.click = stop;\n      }\n\n      return h('input', {\n        ref: 'target',\n        staticClass: 'q-select__input q-placeholder col',\n        class: this.hideSelected !== true && this.innerValue.length > 0 ? 'q-select__input--padding' : null,\n        domProps: {\n          value: this.inputValue\n        },\n        attrs: _objectSpread({\n          // required for Android in order to show ENTER key when in form\n          type: 'search'\n        }, this.$attrs, {\n          tabindex: 0,\n          autofocus: fromDialog === true ? false : this.autofocus,\n          id: this.targetUid,\n          disabled: this.disable === true,\n          readonly: this.readonly === true\n        }),\n        on: on\n      });\n    },\n    __onInputValue: function __onInputValue(e) {\n      var _this11 = this;\n\n      clearTimeout(this.inputTimer);\n\n      if (e && e.target && e.target.composing === true) {\n        return;\n      }\n\n      this.inputValue = e.target.value || ''; // mark it here as user input so that if updateInputValue is called\n      // before filter is called the indicator is reset\n\n      this.userInputValue = true;\n\n      if (this.$listeners.filter !== void 0) {\n        this.inputTimer = setTimeout(function () {\n          _this11.filter(_this11.inputValue);\n        }, this.inputDebounce);\n      }\n    },\n    updateInputValue: function updateInputValue(val, noFiltering, internal) {\n      this.userInputValue = internal !== true;\n\n      if (this.useInput === true) {\n        if (this.inputValue !== val) {\n          this.inputValue = val;\n        }\n\n        noFiltering !== true && this.filter(val);\n      }\n    },\n    filter: function filter(val) {\n      var _this12 = this;\n\n      if (this.$listeners.filter === void 0 || this.focused !== true) {\n        return;\n      }\n\n      if (this.innerLoading === true) {\n        this.$emit('filter-abort');\n      } else {\n        this.innerLoading = true;\n      }\n\n      if (val !== '' && this.multiple !== true && this.innerValue.length > 0 && this.userInputValue !== true && val === this.__getOptionLabel(this.innerValue[0])) {\n        val = '';\n      }\n\n      var filterId = setTimeout(function () {\n        _this12.menu === true && (_this12.menu = false);\n      }, 10);\n      clearTimeout(this.filterId);\n      this.filterId = filterId;\n      this.$emit('filter', val, function (fn) {\n        if (_this12.focused === true && _this12.filterId === filterId) {\n          clearTimeout(_this12.filterId);\n          typeof fn === 'function' && fn();\n\n          _this12.$nextTick(function () {\n            _this12.innerLoading = false;\n\n            if (_this12.menu === true) {\n              _this12.__updateMenu(true);\n            } else {\n              _this12.menu = true;\n            }\n          });\n        }\n      }, function () {\n        if (_this12.focused === true && _this12.filterId === filterId) {\n          clearTimeout(_this12.filterId);\n          _this12.innerLoading = false;\n        }\n\n        _this12.menu === true && (_this12.menu = false);\n      });\n    },\n    __getControlEvents: function __getControlEvents() {\n      var _this13 = this;\n\n      var focusout = function focusout(e) {\n        _this13.__onControlFocusout(e, function () {\n          _this13.__resetInputValue();\n\n          _this13.__closeMenu();\n        });\n      };\n\n      return {\n        focusin: this.__onControlFocusin,\n        focusout: focusout,\n        'popup-show': this.__onControlPopupShow,\n        'popup-hide': function popupHide(e) {\n          e !== void 0 && stop(e);\n\n          _this13.$emit('popup-hide', e);\n\n          _this13.hasDialog !== true && _this13.__focus();\n          _this13.hasPopupOpen = false;\n          focusout(e);\n        },\n        click: function click(e) {\n          // label from QField will propagate click on the input (except IE)\n          if (_this13.hasDialog !== true && _this13.useInput === true && e.target.classList.contains('q-select__input') !== true) {\n            return;\n          }\n\n          if (_this13.hasDialog !== true && _this13.menu === true) {\n            _this13.__closeMenu();\n          } else {\n            _this13.showPopup(e);\n          }\n        }\n      };\n    },\n    __getPopup: function __getPopup(h) {\n      if (this.editable !== false && (this.dialog === true || // dialog always has menu displayed, so need to render it\n      this.noOptions !== true || this.$scopedSlots['no-option'] !== void 0)) {\n        return this[\"__get\".concat(this.hasDialog === true ? 'Dialog' : 'Menu')](h);\n      }\n    },\n    __getMenu: function __getMenu(h) {\n      var child = this.noOptions === true ? this.$scopedSlots['no-option'] !== void 0 ? this.$scopedSlots['no-option']({\n        inputValue: this.inputValue\n      }) : null : this.__getOptions(h);\n      return h(QMenu, {\n        ref: 'menu',\n        props: {\n          value: this.menu,\n          fit: true,\n          cover: this.optionsCover === true && this.noOptions !== true && this.useInput !== true,\n          contentClass: this.menuClass,\n          contentStyle: this.popupContentStyle,\n          noParentEvent: true,\n          noRefocus: true,\n          noFocus: true,\n          square: this.squaredMenu,\n          transitionShow: this.transitionShow,\n          transitionHide: this.transitionHide,\n          separateClosePopup: true\n        },\n        on: {\n          '&scroll': this.__onVirtualScrollEvt,\n          'before-hide': this.__closeMenu\n        }\n      }, child);\n    },\n    __onDialogFieldFocus: function __onDialogFieldFocus(e) {\n      stop(e);\n      this.dialogFieldFocused = true;\n      window.scrollTo(window.pageXOffset || window.scrollX || document.body.scrollLeft || 0, 0);\n    },\n    __onDialogFieldBlur: function __onDialogFieldBlur(e) {\n      var _this14 = this;\n\n      stop(e);\n      this.$nextTick(function () {\n        _this14.dialogFieldFocused = false;\n      });\n    },\n    __getDialog: function __getDialog(h) {\n      var _this15 = this;\n\n      var content = [h(QField, {\n        staticClass: \"col-auto \".concat(this.fieldClass),\n        attrs: {\n          for: this.targetUid\n        },\n        props: _objectSpread({}, this.$props, {\n          dark: this.optionsDark,\n          square: true,\n          loading: this.innerLoading,\n          filled: true,\n          stackLabel: this.inputValue.length > 0\n        }),\n        on: _objectSpread({}, this.$listeners, {\n          focus: this.__onDialogFieldFocus,\n          blur: this.__onDialogFieldBlur\n        }),\n        scopedSlots: _objectSpread({}, this.$scopedSlots, {\n          rawControl: function rawControl() {\n            return _this15.__getControl(h, true);\n          },\n          before: void 0,\n          after: void 0\n        })\n      })];\n      this.menu === true && content.push(h('div', {\n        ref: 'menuContent',\n        staticClass: 'scroll',\n        class: this.menuContentClass,\n        style: this.popupContentStyle,\n        on: {\n          click: prevent,\n          '&scroll': this.__onVirtualScrollEvt\n        }\n      }, this.noOptions === true ? this.$scopedSlots['no-option'] !== void 0 ? this.$scopedSlots['no-option']({\n        inputValue: this.inputValue\n      }) : null : this.__getOptions(h)));\n      return h(QDialog, {\n        props: {\n          value: this.dialog,\n          noRefocus: true,\n          noFocus: true,\n          position: this.useInput === true ? 'top' : void 0,\n          transitionShow: this.transitionShowComputed,\n          transitionHide: this.transitionHide\n        },\n        on: {\n          'before-hide': function beforeHide() {\n            _this15.focused = false;\n          },\n          hide: function hide(e) {\n            _this15.hidePopup();\n\n            _this15.$emit('blur', e);\n\n            _this15.__resetInputValue();\n          },\n          show: function show() {\n            var el = document.activeElement; // IE can have null document.activeElement\n\n            if ((el === null || el.id !== _this15.targetUid) && _this15.$refs.target !== el) {\n              _this15.$refs.target.focus();\n            }\n          }\n        }\n      }, [h('div', {\n        staticClass: 'q-select__dialog' + (this.optionsDark === true ? ' q-select__menu--dark' : '') + (this.dialogFieldFocused === true ? ' q-select__dialog--focused' : '')\n      }, content)]);\n    },\n    __closeMenu: function __closeMenu() {\n      if (this.dialog === true) {\n        return;\n      }\n\n      this.menu = false;\n\n      if (this.focused === false) {\n        clearTimeout(this.filterId);\n        this.filterId = void 0;\n\n        if (this.innerLoading === true) {\n          this.$emit('filter-abort');\n          this.innerLoading = false;\n        }\n      }\n    },\n    showPopup: function showPopup(e) {\n      if (this.hasDialog === true) {\n        this.__onControlFocusin(e);\n\n        this.dialog = true;\n      } else {\n        this.__focus();\n      }\n\n      if (this.$listeners.filter !== void 0) {\n        this.filter(this.inputValue);\n      } else if (this.noOptions !== true || this.$scopedSlots['no-option'] !== void 0) {\n        this.menu = true;\n      }\n    },\n    hidePopup: function hidePopup() {\n      this.dialog = false;\n\n      this.__closeMenu();\n    },\n    __resetInputValue: function __resetInputValue() {\n      this.useInput === true && this.updateInputValue(this.multiple !== true && this.fillInput === true && this.innerValue.length > 0 ? this.__getOptionLabel(this.innerValue[0]) || '' : '', true, true);\n    },\n    __updateMenu: function __updateMenu(show) {\n      var _this16 = this;\n\n      var optionIndex = -1;\n\n      if (show === true) {\n        if (this.innerValue.length > 0) {\n          var val = this.__getOptionValue(this.innerValue[0]);\n\n          optionIndex = this.options.findIndex(function (v) {\n            return isDeepEqual(_this16.__getOptionValue(v), val);\n          });\n        }\n\n        this.__resetVirtualScroll(optionIndex);\n      }\n\n      this.setOptionIndex(optionIndex);\n    },\n    __onPreRender: function __onPreRender() {\n      this.hasDialog = this.$q.platform.is.mobile !== true && this.behavior !== 'dialog' ? false : this.behavior !== 'menu' && (this.useInput === true ? this.$scopedSlots['no-option'] !== void 0 || this.$listeners.filter !== void 0 || this.noOptions === false : true);\n      this.transitionShowComputed = this.hasDialog === true && this.useInput === true && this.$q.platform.is.ios === true ? 'fade' : this.transitionShow;\n    },\n    __onPostRender: function __onPostRender() {\n      if (this.dialog === false && this.$refs.menu !== void 0) {\n        this.$refs.menu.updatePosition();\n      }\n    },\n    updateMenuPosition: function updateMenuPosition() {\n      this.__onPostRender();\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    clearTimeout(this.inputTimer);\n  }\n});",{"version":3,"sources":["/home/witalo/go/src/github.com/witalok2/application/frontend/node_modules/quasar/src/components/select/QSelect.js"],"names":["Vue","QField","QIcon","QChip","QItem","QItemSection","QItemLabel","QMenu","QDialog","isDeepEqual","stop","prevent","stopAndPrevent","normalizeToInterval","VirtualScroll","validateNewValueMode","v","includes","extend","name","mixins","props","value","required","multiple","Boolean","displayValue","String","Number","displayValueSanitize","dropdownIcon","options","type","Array","default","optionValue","Function","optionLabel","optionDisable","hideSelected","hideDropdownIcon","fillInput","maxValues","optionsDense","optionsDark","optionsSelectedClass","optionsCover","optionsSanitize","popupContentClass","popupContentStyle","Object","useInput","useChips","newValueMode","validator","mapOptions","emitValue","inputDebounce","transitionShow","transitionHide","behavior","data","menu","dialog","optionIndex","inputValue","dialogFieldFocused","watch","innerValue","handler","innerLoading","hasValue","__resetInputValue","filter","immediate","show","__updateMenu","computed","virtualScrollLength","isArray","length","fieldClass","menuContentClass","virtualScrollHorizontal","menuClass","mapNull","val","map","__getOption","noOptions","selectedString","opt","__getOptionLabel","join","displayAsText","some","sanitize","selectedScope","tabindex","focused","i","index","selected","removeAtIndex","__removeAtIndexAndFocus","toggleOption","optionScope","virtualScrollSliceRange","from","to","slice","disable","__isDisabled","itemProps","clickable","active","activeClass","manualFocus","dense","dark","__isSelected","itemEvents","click","$q","platform","is","desktop","mousemove","setOptionIndex","dropdownArrowIcon","iconSet","arrow","dropdown","squaredMenu","outlined","standout","borderless","rounded","methods","model","concat","$emit","splice","__focus","add","unique","__getOptionValue","push","editable","optValue","updateInputValue","hidePopup","hasDialog","findIndex","find","label","__onTargetKeyup","e","keyCode","__closeMenu","__onTargetKeypress","__onTargetKeydown","target","$refs","showPopup","optionsLength","scrollTo","$listeners","done","mode","console","error","__getVirtualScrollEl","menuContent","__portal","$el","__getVirtualScrollTarget","__getSelection","h","fromDialog","domProps","$scopedSlots","scope","key","removable","textColor","color","on","remove","__getControl","attrs","child","__getInput","ref","autofocus","keydown","keyup","keypress","assign","$attrs","staticClass","__getOptions","fn","option","__padVirtualScroll","__getInnerAppend","loading","__onCompositionStart","composing","__onCompositionUpdate","codePointAt","__onCompositionEnd","__onInputValue","input","change","compositionstart","compositionend","android","compositionupdate","class","id","targetUid","disabled","readonly","clearTimeout","inputTimer","userInputValue","setTimeout","noFiltering","internal","filterId","$nextTick","__getControlEvents","focusout","__onControlFocusout","focusin","__onControlFocusin","__onControlPopupShow","hasPopupOpen","classList","contains","__getPopup","__getMenu","fit","cover","contentClass","contentStyle","noParentEvent","noRefocus","noFocus","square","separateClosePopup","__onVirtualScrollEvt","__onDialogFieldFocus","window","pageXOffset","scrollX","document","body","scrollLeft","__onDialogFieldBlur","__getDialog","content","for","$props","filled","stackLabel","focus","blur","scopedSlots","rawControl","before","after","style","position","transitionShowComputed","hide","el","activeElement","__resetVirtualScroll","__onPreRender","mobile","ios","__onPostRender","updatePosition","updateMenuPosition","beforeDestroy"],"mappings":"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","sourcesContent":["import Vue from 'vue'\n\nimport QField from '../field/QField.js'\nimport QIcon from '../icon/QIcon.js'\nimport QChip from '../chip/QChip.js'\n\nimport QItem from '../list/QItem.js'\nimport QItemSection from '../list/QItemSection.js'\nimport QItemLabel from '../list/QItemLabel.js'\n\nimport QMenu from '../menu/QMenu.js'\nimport QDialog from '../dialog/QDialog.js'\n\nimport { isDeepEqual } from '../../utils/is.js'\nimport { stop, prevent, stopAndPrevent } from '../../utils/event.js'\nimport { normalizeToInterval } from '../../utils/format.js'\n\nimport VirtualScroll from '../../mixins/virtual-scroll.js'\n\nconst validateNewValueMode = v => ['add', 'add-unique', 'toggle'].includes(v)\n\nexport default Vue.extend({\n  name: 'QSelect',\n\n  mixins: [ QField, VirtualScroll ],\n\n  props: {\n    value: {\n      required: true\n    },\n\n    multiple: Boolean,\n\n    displayValue: [String, Number],\n    displayValueSanitize: Boolean,\n    dropdownIcon: String,\n\n    options: {\n      type: Array,\n      default: () => []\n    },\n\n    optionValue: [Function, String],\n    optionLabel: [Function, String],\n    optionDisable: [Function, String],\n\n    hideSelected: Boolean,\n    hideDropdownIcon: Boolean,\n    fillInput: Boolean,\n\n    maxValues: [Number, String],\n\n    optionsDense: Boolean,\n    optionsDark: Boolean,\n    optionsSelectedClass: String,\n    optionsCover: Boolean,\n    optionsSanitize: Boolean,\n\n    popupContentClass: String,\n    popupContentStyle: [String, Array, Object],\n\n    useInput: Boolean,\n    useChips: Boolean,\n\n    newValueMode: {\n      type: String,\n      validator: validateNewValueMode\n    },\n\n    mapOptions: Boolean,\n    emitValue: Boolean,\n\n    inputDebounce: {\n      type: [Number, String],\n      default: 500\n    },\n\n    transitionShow: String,\n    transitionHide: String,\n\n    behavior: {\n      type: String,\n      validator: v => ['default', 'menu', 'dialog'].includes(v),\n      default: 'default'\n    }\n  },\n\n  data () {\n    return {\n      menu: false,\n      dialog: false,\n      optionIndex: -1,\n      inputValue: '',\n      dialogFieldFocused: false\n    }\n  },\n\n  watch: {\n    innerValue: {\n      handler () {\n        if (\n          this.useInput === true &&\n          this.fillInput === true &&\n          this.multiple !== true &&\n          // Prevent re-entering in filter while filtering\n          // Also prevent clearing inputValue while filtering\n          this.innerLoading !== true &&\n          ((this.dialog !== true && this.menu !== true) || this.hasValue !== true)\n        ) {\n          this.__resetInputValue()\n          if (this.dialog === true || this.menu === true) {\n            this.filter('')\n          }\n        }\n      },\n      immediate: true\n    },\n\n    menu (show) {\n      this.__updateMenu(show)\n    }\n  },\n\n  computed: {\n    virtualScrollLength () {\n      return Array.isArray(this.options)\n        ? this.options.length\n        : 0\n    },\n\n    fieldClass () {\n      return `q-select q-field--auto-height q-select--with${this.useInput !== true ? 'out' : ''}-input`\n    },\n\n    menuContentClass () {\n      return (this.virtualScrollHorizontal === true ? 'q-virtual-scroll--horizontal' : '') +\n        (this.popupContentClass ? ' ' + this.popupContentClass : '')\n    },\n\n    menuClass () {\n      return this.menuContentClass + (this.optionsDark === true ? ' q-select__menu--dark' : '')\n    },\n\n    innerValue () {\n      const\n        mapNull = this.mapOptions === true && this.multiple !== true,\n        val = this.value !== void 0 && (this.value !== null || mapNull === true)\n          ? (this.multiple === true && Array.isArray(this.value) ? this.value : [ this.value ])\n          : []\n\n      return this.mapOptions === true && Array.isArray(this.options) === true\n        ? (\n          this.value === null && mapNull === true\n            ? val.map(v => this.__getOption(v)).filter(v => v !== null)\n            : val.map(v => this.__getOption(v))\n        )\n        : val\n    },\n\n    noOptions () {\n      return this.virtualScrollLength === 0\n    },\n\n    selectedString () {\n      return this.innerValue\n        .map(opt => this.__getOptionLabel(opt))\n        .join(', ')\n    },\n\n    displayAsText () {\n      return this.displayValueSanitize === true || (\n        this.displayValue === void 0 && (\n          this.optionsSanitize === true ||\n          this.innerValue.some(opt => opt !== null && opt.sanitize === true)\n        )\n      )\n    },\n\n    selectedScope () {\n      const tabindex = this.focused === true ? 0 : -1\n\n      return this.innerValue.map((opt, i) => ({\n        index: i,\n        opt,\n        sanitize: this.optionsSanitize === true || opt.sanitize === true,\n        selected: true,\n        removeAtIndex: this.__removeAtIndexAndFocus,\n        toggleOption: this.toggleOption,\n        tabindex\n      }))\n    },\n\n    optionScope () {\n      if (this.virtualScrollLength === 0) {\n        return []\n      }\n\n      const { from, to } = this.virtualScrollSliceRange\n\n      return this.options.slice(from, to).map((opt, i) => {\n        const disable = this.__isDisabled(opt)\n        const index = from + i\n\n        const itemProps = {\n          clickable: true,\n          active: false,\n          activeClass: this.optionsSelectedClass,\n          manualFocus: true,\n          focused: false,\n          disable,\n          tabindex: -1,\n          dense: this.optionsDense,\n          dark: this.optionsDark\n        }\n\n        if (disable !== true) {\n          this.__isSelected(opt) === true && (itemProps.active = true)\n          this.optionIndex === index && (itemProps.focused = true)\n        }\n\n        const itemEvents = {\n          click: () => { this.toggleOption(opt) }\n        }\n\n        if (this.$q.platform.is.desktop === true) {\n          itemEvents.mousemove = () => { this.setOptionIndex(index) }\n        }\n\n        return {\n          index,\n          opt,\n          sanitize: this.optionsSanitize === true || opt.sanitize === true,\n          selected: itemProps.active,\n          focused: itemProps.focused,\n          toggleOption: this.toggleOption,\n          setOptionIndex: this.setOptionIndex,\n          itemProps,\n          itemEvents\n        }\n      })\n    },\n\n    dropdownArrowIcon () {\n      return this.dropdownIcon !== void 0\n        ? this.dropdownIcon\n        : this.$q.iconSet.arrow.dropdown\n    },\n\n    squaredMenu () {\n      return this.optionsCover === false &&\n        this.outlined !== true &&\n        this.standout !== true &&\n        this.borderless !== true &&\n        this.rounded !== true\n    }\n  },\n\n  methods: {\n    removeAtIndex (index) {\n      if (index > -1 && index < this.innerValue.length) {\n        if (this.multiple === true) {\n          const model = [].concat(this.value)\n          this.$emit('remove', { index, value: model.splice(index, 1) })\n          this.$emit('input', model)\n        }\n        else {\n          this.$emit('input', null)\n        }\n      }\n    },\n\n    __removeAtIndexAndFocus (index) {\n      this.removeAtIndex(index)\n      this.__focus()\n    },\n\n    add (opt, unique) {\n      const val = this.emitValue === true\n        ? this.__getOptionValue(opt)\n        : opt\n\n      if (this.multiple !== true) {\n        this.$emit('input', val)\n        return\n      }\n\n      if (this.innerValue.length === 0) {\n        this.$emit('add', { index: 0, value: val })\n        this.$emit('input', this.multiple === true ? [ val ] : val)\n        return\n      }\n\n      if (unique === true && this.__isSelected(opt) === true) {\n        return\n      }\n\n      const model = [].concat(this.value)\n\n      if (this.maxValues !== void 0 && model.length >= this.maxValues) {\n        return\n      }\n\n      this.$emit('add', { index: model.length, value: val })\n      model.push(val)\n      this.$emit('input', model)\n    },\n\n    toggleOption (opt) {\n      if (this.editable !== true || opt === void 0 || this.__isDisabled(opt) === true) {\n        return\n      }\n\n      const optValue = this.__getOptionValue(opt)\n\n      if (this.multiple !== true) {\n        this.updateInputValue(\n          this.fillInput === true ? this.__getOptionLabel(opt) : '',\n          true,\n          true\n        )\n\n        this.hidePopup()\n\n        if (isDeepEqual(this.__getOptionValue(this.value), optValue) !== true) {\n          this.$emit('input', this.emitValue === true ? optValue : opt)\n        }\n        return\n      }\n\n      (this.hasDialog !== true || this.dialogFieldFocused === true) && this.__focus()\n\n      if (this.innerValue.length === 0) {\n        const val = this.emitValue === true ? optValue : opt\n        this.$emit('add', { index: 0, value: val })\n        this.$emit('input', this.multiple === true ? [ val ] : val)\n        return\n      }\n\n      const\n        model = [].concat(this.value),\n        index = this.value.findIndex(v => isDeepEqual(this.__getOptionValue(v), optValue))\n\n      if (index > -1) {\n        this.$emit('remove', { index, value: model.splice(index, 1) })\n      }\n      else {\n        if (this.maxValues !== void 0 && model.length >= this.maxValues) {\n          return\n        }\n\n        const val = this.emitValue === true ? optValue : opt\n\n        this.$emit('add', { index: model.length, value: val })\n        model.push(val)\n      }\n\n      this.$emit('input', model)\n    },\n\n    setOptionIndex (index) {\n      if (this.$q.platform.is.desktop !== true) { return }\n\n      const val = index > -1 && index < this.virtualScrollLength\n        ? index\n        : -1\n\n      if (this.optionIndex !== val) {\n        this.optionIndex = val\n      }\n    },\n\n    __getOption (value) {\n      return this.options.find(opt => isDeepEqual(this.__getOptionValue(opt), value)) || value\n    },\n\n    __getOptionValue (opt) {\n      if (typeof this.optionValue === 'function') {\n        return this.optionValue(opt)\n      }\n      if (Object(opt) === opt) {\n        return typeof this.optionValue === 'string'\n          ? opt[this.optionValue]\n          : opt.value\n      }\n      return opt\n    },\n\n    __getOptionLabel (opt) {\n      if (typeof this.optionLabel === 'function') {\n        return this.optionLabel(opt)\n      }\n      if (Object(opt) === opt) {\n        return typeof this.optionLabel === 'string'\n          ? opt[this.optionLabel]\n          : opt.label\n      }\n      return opt\n    },\n\n    __isDisabled (opt) {\n      if (typeof this.optionDisable === 'function') {\n        return this.optionDisable(opt) === true\n      }\n      if (Object(opt) === opt) {\n        return typeof this.optionDisable === 'string'\n          ? opt[this.optionDisable] === true\n          : opt.disable === true\n      }\n      return false\n    },\n\n    __isSelected (opt) {\n      const val = this.__getOptionValue(opt)\n      return this.innerValue\n        .find(v => isDeepEqual(this.__getOptionValue(v), val)) !== void 0\n    },\n\n    __onTargetKeyup (e) {\n      // if ESC and we have an opened menu\n      // then stop propagation (might be caught by a QDialog\n      // and so it will also close the QDialog, which is wrong)\n      if (e.keyCode === 27 && this.menu === true) {\n        stop(e)\n        this.__closeMenu()\n      }\n      this.$emit('keyup', e)\n    },\n\n    __onTargetKeypress (e) {\n      this.$emit('keypress', e)\n    },\n\n    __onTargetKeydown (e) {\n      this.$emit('keydown', e)\n\n      // escape\n      if (e.keyCode === 27) {\n        return\n      }\n\n      // tab\n      if (e.keyCode === 9) {\n        this.__closeMenu()\n        return\n      }\n\n      if (e.target !== this.$refs.target) { return }\n\n      // down\n      if (\n        e.keyCode === 40 &&\n        this.innerLoading !== true &&\n        this.menu === false\n      ) {\n        stopAndPrevent(e)\n        this.showPopup()\n        return\n      }\n\n      // delete\n      if (\n        e.keyCode === 8 &&\n        this.multiple === true &&\n        this.inputValue.length === 0 &&\n        Array.isArray(this.value)\n      ) {\n        this.removeAtIndex(this.value.length - 1)\n        return\n      }\n\n      // up, down\n      const optionsLength = this.virtualScrollLength\n\n      if (e.keyCode === 38 || e.keyCode === 40) {\n        stopAndPrevent(e)\n\n        if (this.menu === true) {\n          let index = this.optionIndex\n          do {\n            index = normalizeToInterval(\n              index + (e.keyCode === 38 ? -1 : 1),\n              -1,\n              optionsLength - 1\n            )\n          }\n          while (index !== -1 && index !== this.optionIndex && this.__isDisabled(this.options[index]) === true)\n\n          if (this.optionIndex !== index) {\n            this.setOptionIndex(index)\n            this.scrollTo(index)\n\n            if (index >= 0 && this.useInput === true && this.fillInput === true) {\n              const inputValue = this.__getOptionLabel(this.options[index])\n              if (this.inputValue !== inputValue) {\n                this.inputValue = inputValue\n              }\n            }\n          }\n        }\n      }\n\n      // enter\n      if (e.target !== this.$refs.target || e.keyCode !== 13) { return }\n\n      stopAndPrevent(e)\n\n      if (this.optionIndex > -1 && this.optionIndex < optionsLength) {\n        this.toggleOption(this.options[this.optionIndex])\n        return\n      }\n\n      if (\n        this.inputValue.length > 0 &&\n        (this.newValueMode !== void 0 || this.$listeners['new-value'] !== void 0)\n      ) {\n        const done = (val, mode) => {\n          if (mode) {\n            if (validateNewValueMode(mode) !== true) {\n              console.error('QSelect: invalid new value mode - ' + mode)\n              return\n            }\n          }\n          else {\n            mode = this.newValueMode\n          }\n\n          if (val !== void 0 && val !== null) {\n            this[mode === 'toggle' ? 'toggleOption' : 'add'](\n              val,\n              mode === 'add-unique'\n            )\n          }\n\n          this.updateInputValue('', this.multiple !== true, true)\n        }\n\n        if (this.$listeners['new-value'] !== void 0) {\n          this.$emit('new-value', this.inputValue, done)\n\n          if (this.multiple !== true) {\n            return\n          }\n        }\n        else {\n          done(this.inputValue)\n        }\n      }\n\n      if (this.menu === true) {\n        this.__closeMenu()\n      }\n      else if (this.innerLoading !== true) {\n        this.showPopup()\n      }\n    },\n\n    __getVirtualScrollEl () {\n      return this.hasDialog === true\n        ? this.$refs.menuContent\n        : (\n          this.$refs.menu !== void 0 && this.$refs.menu.__portal !== void 0\n            ? this.$refs.menu.__portal.$el\n            : void 0\n        )\n    },\n\n    __getVirtualScrollTarget () {\n      return this.__getVirtualScrollEl()\n    },\n\n    __getSelection (h, fromDialog) {\n      if (this.hideSelected === true) {\n        return fromDialog !== true && this.hasDialog === true\n          ? [\n            h('span', {\n              domProps: {\n                'textContent': this.inputValue\n              }\n            })\n          ]\n          : []\n      }\n\n      if (this.$scopedSlots['selected-item'] !== void 0) {\n        return this.selectedScope.map(scope => this.$scopedSlots['selected-item'](scope))\n      }\n\n      if (this.$scopedSlots.selected !== void 0) {\n        return this.$scopedSlots.selected()\n      }\n\n      if (this.useChips === true) {\n        const tabindex = this.focused === true ? 0 : -1\n\n        return this.selectedScope.map((scope, i) => h(QChip, {\n          key: 'option-' + i,\n          props: {\n            removable: this.__isDisabled(scope.opt) !== true,\n            dense: true,\n            textColor: this.color,\n            tabindex\n          },\n          on: {\n            remove () { scope.removeAtIndex(i) }\n          }\n        }, [\n          h('span', {\n            domProps: {\n              [scope.sanitize === true ? 'textContent' : 'innerHTML']: this.__getOptionLabel(scope.opt)\n            }\n          })\n        ]))\n      }\n\n      return [\n        h('span', {\n          domProps: {\n            [this.displayAsText ? 'textContent' : 'innerHTML']: this.displayValue !== void 0\n              ? this.displayValue\n              : this.selectedString\n          }\n        })\n      ]\n    },\n\n    __getControl (h, fromDialog) {\n      let data = { attrs: {} }\n      const child = this.__getSelection(h, fromDialog)\n\n      if (this.useInput === true && (fromDialog === true || this.hasDialog === false)) {\n        child.push(this.__getInput(h, fromDialog))\n      }\n      else if (this.editable === true) {\n        data = {\n          ref: 'target',\n          attrs: {\n            tabindex: 0,\n            autofocus: this.autofocus\n          },\n          on: {\n            keydown: this.__onTargetKeydown,\n            keyup: this.__onTargetKeyup,\n            keypress: this.__onTargetKeypress\n          }\n        }\n      }\n\n      Object.assign(data.attrs, this.$attrs)\n      data.staticClass = 'q-field__native row items-center'\n\n      return h('div', data, child)\n    },\n\n    __getOptions (h) {\n      if (this.menu !== true) {\n        return void 0\n      }\n\n      const fn = this.$scopedSlots.option !== void 0\n        ? this.$scopedSlots.option\n        : scope => h(QItem, {\n          key: scope.index,\n          props: scope.itemProps,\n          on: scope.itemEvents\n        }, [\n          h(QItemSection, [\n            h(QItemLabel, {\n              domProps: {\n                [scope.sanitize === true ? 'textContent' : 'innerHTML']: this.__getOptionLabel(scope.opt)\n              }\n            })\n          ])\n        ])\n\n      let options = this.__padVirtualScroll(h, 'div', this.optionScope.map(fn))\n\n      if (this.$scopedSlots['before-options'] !== void 0) {\n        options = this.$scopedSlots['before-options']().concat(options)\n      }\n      if (this.$scopedSlots['after-options'] !== void 0) {\n        options = options.concat(this.$scopedSlots['after-options']())\n      }\n\n      return options\n    },\n\n    __getInnerAppend (h) {\n      return this.loading !== true && this.innerLoading !== true && this.hideDropdownIcon !== true\n        ? [\n          h(QIcon, {\n            staticClass: 'q-select__dropdown-icon',\n            props: { name: this.dropdownArrowIcon }\n          })\n        ]\n        : null\n    },\n\n    __onCompositionStart (e) {\n      e.target.composing = true\n    },\n\n    __onCompositionUpdate (e) {\n      if (typeof e.data === 'string' && e.data.codePointAt(0) < 256) {\n        e.target.composing = false\n      }\n    },\n\n    __onCompositionEnd (e) {\n      if (e.target.composing !== true) { return }\n      e.target.composing = false\n\n      this.__onInputValue(e)\n    },\n\n    __getInput (h, fromDialog) {\n      const on = {\n        input: this.__onInputValue,\n        // Safari < 10.2 & UIWebView doesn't fire compositionend when\n        // switching focus before confirming composition choice\n        // this also fixes the issue where some browsers e.g. iOS Chrome\n        // fires \"change\" instead of \"input\" on autocomplete.\n        change: this.__onCompositionEnd,\n        compositionstart: this.__onCompositionStart,\n        compositionend: this.__onCompositionEnd,\n        keydown: this.__onTargetKeydown,\n        keyup: this.__onTargetKeyup,\n        keypress: this.__onTargetKeypress\n      }\n\n      if (this.$q.platform.is.android === true) {\n        on.compositionupdate = this.__onCompositionUpdate\n      }\n\n      if (this.hasDialog === true) {\n        on.click = stop\n      }\n\n      return h('input', {\n        ref: 'target',\n        staticClass: 'q-select__input q-placeholder col',\n        class: this.hideSelected !== true && this.innerValue.length > 0\n          ? 'q-select__input--padding'\n          : null,\n        domProps: { value: this.inputValue },\n        attrs: {\n          // required for Android in order to show ENTER key when in form\n          type: 'search',\n          ...this.$attrs,\n          tabindex: 0,\n          autofocus: fromDialog === true ? false : this.autofocus,\n          id: this.targetUid,\n          disabled: this.disable === true,\n          readonly: this.readonly === true\n        },\n        on\n      })\n    },\n\n    __onInputValue (e) {\n      clearTimeout(this.inputTimer)\n\n      if (e && e.target && e.target.composing === true) {\n        return\n      }\n\n      this.inputValue = e.target.value || ''\n      // mark it here as user input so that if updateInputValue is called\n      // before filter is called the indicator is reset\n      this.userInputValue = true\n\n      if (this.$listeners.filter !== void 0) {\n        this.inputTimer = setTimeout(() => {\n          this.filter(this.inputValue)\n        }, this.inputDebounce)\n      }\n    },\n\n    updateInputValue (val, noFiltering, internal) {\n      this.userInputValue = internal !== true\n\n      if (this.useInput === true) {\n        if (this.inputValue !== val) {\n          this.inputValue = val\n        }\n\n        noFiltering !== true && this.filter(val)\n      }\n    },\n\n    filter (val) {\n      if (this.$listeners.filter === void 0 || this.focused !== true) {\n        return\n      }\n\n      if (this.innerLoading === true) {\n        this.$emit('filter-abort')\n      }\n      else {\n        this.innerLoading = true\n      }\n\n      if (\n        val !== '' &&\n        this.multiple !== true &&\n        this.innerValue.length > 0 &&\n        this.userInputValue !== true &&\n        val === this.__getOptionLabel(this.innerValue[0])\n      ) {\n        val = ''\n      }\n\n      const filterId = setTimeout(() => {\n        this.menu === true && (this.menu = false)\n      }, 10)\n      clearTimeout(this.filterId)\n      this.filterId = filterId\n\n      this.$emit(\n        'filter',\n        val,\n        fn => {\n          if (this.focused === true && this.filterId === filterId) {\n            clearTimeout(this.filterId)\n            typeof fn === 'function' && fn()\n            this.$nextTick(() => {\n              this.innerLoading = false\n              if (this.menu === true) {\n                this.__updateMenu(true)\n              }\n              else {\n                this.menu = true\n              }\n            })\n          }\n        },\n        () => {\n          if (this.focused === true && this.filterId === filterId) {\n            clearTimeout(this.filterId)\n            this.innerLoading = false\n          }\n          this.menu === true && (this.menu = false)\n        }\n      )\n    },\n\n    __getControlEvents () {\n      const focusout = e => {\n        this.__onControlFocusout(e, () => {\n          this.__resetInputValue()\n          this.__closeMenu()\n        })\n      }\n\n      return {\n        focusin: this.__onControlFocusin,\n        focusout,\n        'popup-show': this.__onControlPopupShow,\n        'popup-hide': e => {\n          e !== void 0 && stop(e)\n          this.$emit('popup-hide', e)\n          this.hasDialog !== true && this.__focus()\n          this.hasPopupOpen = false\n          focusout(e)\n        },\n        click: e => {\n          // label from QField will propagate click on the input (except IE)\n          if (\n            this.hasDialog !== true &&\n            this.useInput === true &&\n            e.target.classList.contains('q-select__input') !== true\n          ) {\n            return\n          }\n          if (this.hasDialog !== true && this.menu === true) {\n            this.__closeMenu()\n          }\n          else {\n            this.showPopup(e)\n          }\n        }\n      }\n    },\n\n    __getPopup (h) {\n      if (\n        this.editable !== false && (\n          this.dialog === true || // dialog always has menu displayed, so need to render it\n          this.noOptions !== true ||\n          this.$scopedSlots['no-option'] !== void 0\n        )\n      ) {\n        return this[`__get${this.hasDialog === true ? 'Dialog' : 'Menu'}`](h)\n      }\n    },\n\n    __getMenu (h) {\n      const child = this.noOptions === true\n        ? (\n          this.$scopedSlots['no-option'] !== void 0\n            ? this.$scopedSlots['no-option']({ inputValue: this.inputValue })\n            : null\n        )\n        : this.__getOptions(h)\n\n      return h(QMenu, {\n        ref: 'menu',\n        props: {\n          value: this.menu,\n          fit: true,\n          cover: this.optionsCover === true && this.noOptions !== true && this.useInput !== true,\n          contentClass: this.menuClass,\n          contentStyle: this.popupContentStyle,\n          noParentEvent: true,\n          noRefocus: true,\n          noFocus: true,\n          square: this.squaredMenu,\n          transitionShow: this.transitionShow,\n          transitionHide: this.transitionHide,\n          separateClosePopup: true\n        },\n        on: {\n          '&scroll': this.__onVirtualScrollEvt,\n          'before-hide': this.__closeMenu\n        }\n      }, child)\n    },\n\n    __onDialogFieldFocus (e) {\n      stop(e)\n      this.dialogFieldFocused = true\n      window.scrollTo(window.pageXOffset || window.scrollX || document.body.scrollLeft || 0, 0)\n    },\n\n    __onDialogFieldBlur (e) {\n      stop(e)\n      this.$nextTick(() => {\n        this.dialogFieldFocused = false\n      })\n    },\n\n    __getDialog (h) {\n      const content = [\n        h(QField, {\n          staticClass: `col-auto ${this.fieldClass}`,\n          attrs: {\n            for: this.targetUid\n          },\n          props: {\n            ...this.$props,\n            dark: this.optionsDark,\n            square: true,\n            loading: this.innerLoading,\n            filled: true,\n            stackLabel: this.inputValue.length > 0\n          },\n          on: {\n            ...this.$listeners,\n            focus: this.__onDialogFieldFocus,\n            blur: this.__onDialogFieldBlur\n          },\n          scopedSlots: {\n            ...this.$scopedSlots,\n            rawControl: () => this.__getControl(h, true),\n            before: void 0,\n            after: void 0\n          }\n        })\n      ]\n\n      this.menu === true && content.push(\n        h('div', {\n          ref: 'menuContent',\n          staticClass: 'scroll',\n          class: this.menuContentClass,\n          style: this.popupContentStyle,\n          on: {\n            click: prevent,\n            '&scroll': this.__onVirtualScrollEvt\n          }\n        }, (\n          this.noOptions === true\n            ? (\n              this.$scopedSlots['no-option'] !== void 0\n                ? this.$scopedSlots['no-option']({ inputValue: this.inputValue })\n                : null\n            )\n            : this.__getOptions(h)\n        ))\n      )\n\n      return h(QDialog, {\n        props: {\n          value: this.dialog,\n          noRefocus: true,\n          noFocus: true,\n          position: this.useInput === true ? 'top' : void 0,\n          transitionShow: this.transitionShowComputed,\n          transitionHide: this.transitionHide\n        },\n        on: {\n          'before-hide': () => {\n            this.focused = false\n          },\n          hide: e => {\n            this.hidePopup()\n            this.$emit('blur', e)\n            this.__resetInputValue()\n          },\n          show: () => {\n            const el = document.activeElement\n            // IE can have null document.activeElement\n            if (\n              (el === null || el.id !== this.targetUid) &&\n              this.$refs.target !== el\n            ) {\n              this.$refs.target.focus()\n            }\n          }\n        }\n      }, [\n        h('div', {\n          staticClass: 'q-select__dialog' +\n            (this.optionsDark === true ? ' q-select__menu--dark' : '') +\n            (this.dialogFieldFocused === true ? ' q-select__dialog--focused' : '')\n        }, content)\n      ])\n    },\n\n    __closeMenu () {\n      if (this.dialog === true) {\n        return\n      }\n\n      this.menu = false\n\n      if (this.focused === false) {\n        clearTimeout(this.filterId)\n        this.filterId = void 0\n\n        if (this.innerLoading === true) {\n          this.$emit('filter-abort')\n          this.innerLoading = false\n        }\n      }\n    },\n\n    showPopup (e) {\n      if (this.hasDialog === true) {\n        this.__onControlFocusin(e)\n        this.dialog = true\n      }\n      else {\n        this.__focus()\n      }\n\n      if (this.$listeners.filter !== void 0) {\n        this.filter(this.inputValue)\n      }\n      else if (this.noOptions !== true || this.$scopedSlots['no-option'] !== void 0) {\n        this.menu = true\n      }\n    },\n\n    hidePopup () {\n      this.dialog = false\n      this.__closeMenu()\n    },\n\n    __resetInputValue () {\n      this.useInput === true && this.updateInputValue(\n        this.multiple !== true && this.fillInput === true && this.innerValue.length > 0\n          ? this.__getOptionLabel(this.innerValue[0]) || ''\n          : '',\n        true,\n        true\n      )\n    },\n\n    __updateMenu (show) {\n      let optionIndex = -1\n\n      if (show === true) {\n        if (this.innerValue.length > 0) {\n          const val = this.__getOptionValue(this.innerValue[0])\n          optionIndex = this.options.findIndex(v => isDeepEqual(this.__getOptionValue(v), val))\n        }\n\n        this.__resetVirtualScroll(optionIndex)\n      }\n\n      this.setOptionIndex(optionIndex)\n    },\n\n    __onPreRender () {\n      this.hasDialog = this.$q.platform.is.mobile !== true && this.behavior !== 'dialog'\n        ? false\n        : this.behavior !== 'menu' && (\n          this.useInput === true\n            ? this.$scopedSlots['no-option'] !== void 0 || this.$listeners.filter !== void 0 || this.noOptions === false\n            : true\n        )\n\n      this.transitionShowComputed = this.hasDialog === true && this.useInput === true && this.$q.platform.is.ios === true\n        ? 'fade'\n        : this.transitionShow\n    },\n\n    __onPostRender () {\n      if (this.dialog === false && this.$refs.menu !== void 0) {\n        this.$refs.menu.updatePosition()\n      }\n    },\n\n    updateMenuPosition () {\n      this.__onPostRender()\n    }\n  },\n\n  beforeDestroy () {\n    clearTimeout(this.inputTimer)\n  }\n})\n"]}]}